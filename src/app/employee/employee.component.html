
<!-- HEADER with logo -->
<header class="app-header">
  <div class="logo">
  <img src="assets/Logo.png" alt="Logo">
  </div>
  <div class="theme-toggle-icon" (click)="toggleTheme()" [title]="isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode'">
    <span *ngIf="!isDarkMode">ğŸŒ</span>
    <span *ngIf="isDarkMode">ğŸŒ™</span>
  </div>
  </header>
 
 
  <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
 
 <div class="project-section-wrapper">
  
  <div class="project-section">
    <div class="project-header">
      ğŸ‘¥ Project Details
      </div>
 <div class="project-grid">
  
<!-- Project Name -->
    <div class="form-group">
  <label for="projectName">ğŸ“ Project Name</label>
  <input type="text" id="projectName" formControlName="projectName" placeholder="Project name">
 
  <div *ngIf="employeeForm.get('projectName')?.touched && employeeForm.get('projectName')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('projectName')?.errors?.['required']">
      Project name is required
    </ng-container>
   
    <!-- Show pattern error only if required error is not present -->
    <ng-container *ngIf="!employeeForm.get('projectName')?.errors?.['required'] && employeeForm.get('projectName')?.errors?.['pattern']">
      Name must not contain numbers or special characters
    </ng-container>
  </div>
</div>
 
 
    <!-- Project Manager Name -->
    <div class="form-group">
  <label for="projectManagerName">ğŸ‘¨â€ğŸ’¼ Project Manager Name</label>
  <input type="text" id="projectManagerName" formControlName="projectManagerName" placeholder="Manager's full name">
 
  <div *ngIf="employeeForm.get('projectManagerName')?.touched && employeeForm.get('projectManagerName')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('projectManagerName')?.errors?.['required']">
      Project manager name is required
    </ng-container>
   
    <!-- Show pattern error only if required error is not present -->
    <ng-container *ngIf="!employeeForm.get('projectManagerName')?.errors?.['required'] && employeeForm.get('projectManagerName')?.errors?.['pattern']">
      Name must not contain numbers or special characters
    </ng-container>
  </div>
</div>
 
 
    
 
<!-- Team Lead Name -->
    <div class="form-group">
  <label for="teamLeadName">ğŸ‘¨â€ğŸ’¼ Team Lead Name</label>
  <input type="text" id="teamLeadName" formControlName="teamLeadName" placeholder="Team Lead's full name">
 
  <div *ngIf="employeeForm.get('teamLeadName')?.touched && employeeForm.get('teamLeadName')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('teamLeadName')?.errors?.['required']">
      Team Lead name is required
    </ng-container>
   
    <!-- Show pattern error only if required error is not present -->
    <ng-container *ngIf="!employeeForm.get('teamLeadName')?.errors?.['required'] && employeeForm.get('teamLeadName')?.errors?.['pattern']">
      Name must not contain numbers or special characters
    </ng-container>
  </div>
</div>
 
  
 
    <!-- Project management office Name -->
    <div class="form-group">
  <label for="projectManagementOfficeName">ğŸ‘¨â€ğŸ’¼ Project Management Officer Name</label>
  <input type="text" id="projectManagementOfficeName" formControlName="pmoName" placeholder="Project Management Officer's full name">
 
  <div *ngIf="employeeForm.get('pmoName')?.touched && employeeForm.get('pmoName')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('pmoName')?.errors?.['required']">
      Project Management Officer name is required
    </ng-container>
   
    <!-- Show pattern error only if required error is not present -->
    <ng-container *ngIf="!employeeForm.get('pmoName')?.errors?.['required'] && employeeForm.get('pmoName')?.errors?.['pattern']">
      Name must not contain numbers or special characters
    </ng-container>
  </div>
</div>
 
  

<!-- Project Start Date -->

<div class="form-group">
  <div class="date-range-container">
    <div class="date-field">
      <label for="projectStartDate" class="date-range-label">ğŸ“… Start Date</label>
      <input type="date" id="projectStartDate" formControlName="projectStartDate">
    </div>
    <div class="date-field">
      <label for="projectEndDate" class="date-range-label">ğŸ“… End Date</label>
      <input type="date" id="projectEndDate" formControlName="projectEndDate">
    </div>
  </div>
  <div *ngIf="employeeForm.get('projectStartDate')?.invalid && employeeForm.get('projectStartDate')?.touched" class="error-message">
    Project Duration is required
  </div>
</div>

<!-- Project Manager Email -->
   <div class="form-group">
  <label for="projectManagerEmail">ğŸ“§ Project Manager Email</label>
  <input type="email" id="projectManagerEmail" formControlName="projectManagerEmail" placeholder="manager@example.com">
 
  <div *ngIf="employeeForm.get('projectManagerEmail')?.touched && employeeForm.get('projectManagerEmail')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('projectManagerEmail')?.errors?.['required']">
      Manager email is required
    </ng-container>
 
    <!-- Show pattern error if required is not present -->
    <ng-container *ngIf="!employeeForm.get('projectManagerEmail')?.errors?.['required'] && employeeForm.get('projectManagerEmail')?.errors?.['pattern']">
      Enter a valid manager email ending in .com or .in
    </ng-container>
  </div>
</div>

<!-- Team Lead Email -->
   <div class="form-group">
  <label for="teamLeadEmail">ğŸ“§ Team Lead Email</label>
  <input type="email" id="teamLeadEmail" formControlName="teamLeadEmail" placeholder="teamlead@example.com">
 
  <div *ngIf="employeeForm.get('teamLeadEmail')?.touched && employeeForm.get('teamLeadEmail')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('teamLeadEmail')?.errors?.['required']">
      Team Lead email is required
    </ng-container>
 
    <!-- Show pattern error if required is not present -->
    <ng-container *ngIf="!employeeForm.get('teamLeadEmail')?.errors?.['required'] && employeeForm.get('teamLeadEmail')?.errors?.['pattern']">
      Enter a valid team lead email ending in .com or .in
    </ng-container>
  </div>
</div>

<!-- Project Management Office Email -->
   <div class="form-group">
  <label for="projectManagementOfficeEmail">ğŸ“§ Project Management Officer Email</label>
  <input type="email" id="projectManagementOfficeEmail" formControlName="pmoEmail" placeholder="manager@example.com">
 
  <div *ngIf="employeeForm.get('pmoEmail')?.touched && employeeForm.get('pmoEmail')?.invalid" class="error-message">
    <!-- Show 'required' error first -->
    <ng-container *ngIf="employeeForm.get('pmoEmail')?.errors?.['required']">
      Project Management Officer email is required
    </ng-container>
 
    <!-- Show pattern error if required is not present -->
    <ng-container *ngIf="!employeeForm.get('pmoEmail')?.errors?.['required'] && employeeForm.get('pmoEmail')?.errors?.['pattern']">
      Enter a valid project management officer email ending in .com or .in
    </ng-container>
  </div>
</div>


 
</div>
 </div>

 <!-- Employee Table Section (Reactive Form + Editable Rows) -->
<div class="employee-details-card" formArrayName="employeeList">
  <div class="employee-card-header">
    ğŸ‘¥ Employee Details
  </div>

  <div class="table-wrapper">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 full-width-table">

      <!-- Employee ID -->
      <ng-container matColumnDef="employeeId">
        <th mat-header-cell *matHeaderCellDef>ğŸ‘¨â€ğŸ’¼Employee ID</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyId">
            <input type="text" formControlName="employeeId" placeholder="Enter employee ID">
            
          </ng-container>

          <ng-template #readOnlyId>
            {{ row.get('employeeId')?.value }}
          </ng-template>

        </td>
      </ng-container>

      <!-- Employee Name -->
      <ng-container matColumnDef="employeeName">
        <th mat-header-cell *matHeaderCellDef>ğŸ‘¨â€ğŸ’¼Employee Name</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyName">
            <input type="text" formControlName="employeeName" placeholder="Enter full name">
            <div *ngIf="row.get('employeeName')?.touched && row.get('employeeName')?.invalid" class="error-message">
              <ng-container *ngIf="!row.get('employeeName')?.errors?.['required'] && row.get('employeeName')?.errors?.['pattern']">
                Name must not contain numbers or special characters
              </ng-container>
            </div>
          </ng-container>

          <ng-template #readOnlyName>
            {{ row.get('employeeName')?.value }}
          </ng-template>

        </td>
      </ng-container>

      <!-- Joining Date -->
      <ng-container matColumnDef="joiningDate">
        <th mat-header-cell *matHeaderCellDef>ğŸ“…Joining Date</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyDate">
            <input type="date" formControlName="joiningDate">
          </ng-container>

          <ng-template #readOnlyDate>
            {{ row.get('joiningDate')?.value | date: 'dd/MM/yyyy' }}
          </ng-template>

        </td>
      </ng-container>

      <!-- Email -->
      <ng-container matColumnDef="employeeEmail">
        <th mat-header-cell *matHeaderCellDef>ğŸ“§Employee Email</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyEmail">
            <input type="email" formControlName="employeeEmail" placeholder="example@company.com">
            <div *ngIf="row.get('employeeEmail')?.touched && row.get('employeeEmail')?.invalid" class="error-message">
              <ng-container *ngIf="!row.get('employeeEmail')?.errors?.['required'] && row.get('employeeEmail')?.errors?.['pattern']">
                Enter a valid email ending in .com or .in
              </ng-container>
            </div>
          </ng-container>

          <ng-template #readOnlyEmail>
            {{ row.get('employeeEmail')?.value }}
          </ng-template>

        </td>
      </ng-container>

      <!-- Employment Type -->
      <ng-container matColumnDef="employmentType">
        <th mat-header-cell *matHeaderCellDef>ğŸ“Job Type</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyType">
            <select formControlName="employmentType">
              <option value="">Select type</option>
              <option *ngFor="let type of employmentTypes" [value]="type">{{ type }}</option>
            </select>
          </ng-container>

          <ng-template #readOnlyType>
            {{ row.get('employmentType')?.value }}
          </ng-template>

        </td>
      </ng-container>

      <!-- Designation -->
      <ng-container matColumnDef="designation">
        <th mat-header-cell *matHeaderCellDef>ğŸ“Designation</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyDesignation">
            <select formControlName="designation">
              <option value="">Select designation</option>
              <option *ngFor="let desg of designation" [value]="desg">{{ desg }}</option>
            </select>
          </ng-container>

          <ng-template #readOnlyDesignation>
            {{ row.get('designation')?.value }}
          </ng-template>

        </td>
      </ng-container>

      <!-- Department -->
      <ng-container matColumnDef="department">
        <th mat-header-cell *matHeaderCellDef>ğŸ“Department</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">

          <ng-container *ngIf="editRowMap[i]; else readOnlyDepartment">
            <select formControlName="department">
              <option value="">Select department</option>
              <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
            </select>
          </ng-container>

          <ng-template #readOnlyDepartment>
            {{ row.get('department')?.value }}
          </ng-template>

        </td>
      </ng-container>

      <ng-container matColumnDef="noticePeriod">
  <th mat-header-cell *matHeaderCellDef>Notice Period</th>
  <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
    <!-- Editable -->
    <ng-container *ngIf="editRowMap[i]; else readOnlyNotice">
      <mat-slide-toggle formControlName="noticePeriod">
      </mat-slide-toggle>
    </ng-container>
    <!-- Read Only -->
    <ng-template #readOnlyNotice>
      {{ row.get('noticePeriod')?.value ? 'Yes' : 'No' }}
    </ng-template>
  </td>
</ng-container>

<ng-container matColumnDef="probationPeriod">
  <th mat-header-cell *matHeaderCellDef>Probation Period</th>
  <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
    <!-- Editable -->
    <ng-container *ngIf="editRowMap[i]; else readOnlyProbation">
      <mat-slide-toggle formControlName="probationPeriod">
      </mat-slide-toggle>
    </ng-container>
    <!-- Read Only -->
    <ng-template #readOnlyProbation>
      {{ row.get('probationPeriod')?.value ? 'Yes' : 'No' }}
    </ng-template>
  </td>
</ng-container>



      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row; let i = index">
        <div class="action-button">
          <ng-container *ngIf="editRowMap[i]; else viewActions">
            <button type="button" mat-icon-button color="primary" (click)="saveRow(i)">
              <mat-icon>check</mat-icon>
            </button>
            <button type="button" mat-icon-button color="warn" (click)="deleteEmployee(i)">
              <mat-icon>delete</mat-icon>
            </button>
            </ng-container>
          
          <ng-template #viewActions>
            <button type="button" mat-icon-button (click)="editRow(i)">
              <mat-icon>edit</mat-icon>
            </button>
            <button type="button" mat-icon-button color="warn" (click)="deleteEmployee(i)">
              <mat-icon>delete</mat-icon>
              </button>
          </ng-template>
        </div>
        </td>
      </ng-container>

      <!-- Render Rows -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <!-- Add Employee Button -->
  <div class="add-employee-btn-wrapper">
    <button type="button" mat-raised-button color="accent" (click)="addEmployeeRow()">
      <mat-icon>add</mat-icon> Add Employee
    </button>
  </div>
</div>

 <div class="fab-action-wrapper">
<div class="fab-form-actions">
  <button mat-raised-button class="fab-btn fab-reset" (click)="onReset()" matTooltip="Reset">
    <mat-icon>refresh</mat-icon>
    Reset
  </button>
 
  <button mat-raised-button class="fab-btn fab-save" type="submit" matTooltip="Submit">
    <mat-icon>save</mat-icon>
    Submit
  </button>
 
  <button mat-raised-button class="fab-btn fab-exit" (click)="onExit()" matTooltip="Exit">
    <mat-icon>exit_to_app</mat-icon>
    Exit
  </button>
</div> 
</div> 
</div>
  
  </form>
